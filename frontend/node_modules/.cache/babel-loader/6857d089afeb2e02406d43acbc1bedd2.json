{"ast":null,"code":"var _jsxFileName = \"/Users/daniellluis 1/Desktop/noticias_colaborativas/proyecto_final/frontend/src/pages/UpdateNewsPartner.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getNewsById, updateNewsPartner } from \"../api/api\";\nimport { Token } from \"../components/token\";\nimport { ErrorContext } from \"../components/error\";\nimport \"./updateNewsPartner.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst UpdateNewsProfile = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [token] = useContext(Token);\n  const [file, setFile] = useState(\"\");\n  const [currentPicture, setCurrentPicture] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [lead, setLead] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [category, setCategory] = useState(\"Elige una categorÃ­a\");\n  const [, setError] = useContext(ErrorContext);\n  useEffect(() => {\n    const loadSingleNews = async () => {\n      try {\n        const res = await getNewsById(id);\n        const data = await res.json();\n\n        if (res.ok) {\n          setCurrentPicture(`${process.env.REACT_APP_STATIC}/images/news/${data.picture}`);\n          setTitle(data.news_title);\n          setLead(data.news_lead);\n          setText(data.news_text);\n          setCategory(data.news_category);\n        } else {\n          throw new Error(data.error);\n        }\n      } catch (error) {\n        setError(error.message);\n      }\n    };\n\n    loadSingleNews();\n  }, [id, setError]);\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let requestBody = new FormData();\n    requestBody.append(\"title\", title);\n    requestBody.append(\"lead\", lead);\n    requestBody.append(\"text\", text);\n    requestBody.append(\"category\", category);\n\n    if (file) {\n      requestBody.append(\"image\", file);\n    }\n\n    console.log(currentPicture);\n\n    try {\n      const res = await updateNewsPartner(requestBody, token, id);\n      console.log(requestBody);\n      const data = await res.json();\n\n      if (res.ok) {\n        window.location = `http://localhost:3050/news/${id}`;\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"main-container-Update-News\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-edit-news\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"title-news-partner\",\n          children: \"Editar noticia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"separator\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"label-image\",\n            htmlFor: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), currentPicture ? /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"img-news-partner\",\n            src: currentPicture,\n            alt: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-partner-image\",\n            type: \"file\",\n            onChange: e => {\n              setFile(e.target.files[0]);\n              setCurrentPicture(URL.createObjectURL(e.target.files[0]));\n            },\n            accept: \"image/*\",\n            name: \"image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-edit-partner-news\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-pencil-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-edit-partner\",\n            name: \"title\",\n            type: \"text\",\n            value: title,\n            onChange: e => setTitle(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-edit-partner-news\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-pencil-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"lead\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input-edit-partner\",\n            name: \"lead\",\n            type: \"text\",\n            value: lead,\n            onChange: e => setLead(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-edit-partner-news\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-pencil-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"text\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            className: \"input-edit-partner\",\n            name: \"text\",\n            type: \"text\",\n            row: \"8\",\n            value: text,\n            onChange: e => setText(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-edit-partner-news\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"fas fa-pencil-alt\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"select-edit-partner-news\",\n            name: \"category\",\n            type: \"text\",\n            value: category,\n            onChange: e => {\n              setCategory(e.target.value);\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Elige una categor\\xEDa\",\n              children: \"Elige una Categor\\xEDa\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ciencia y tecnologia\",\n              children: \"ciencia y tecnologia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"cultura\",\n              children: \"cultura\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"deportes\",\n              children: \"deportes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"economia\",\n              children: \"economia\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"politica\",\n              children: \"politica\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"div-post-submit\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"submit\",\n            type: \"submit\",\n            value: \"Guardar Cambios\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(UpdateNewsProfile, \"af/gjtivRrUvKWRCzXBNJyY2TzA=\", false, function () {\n  return [useParams];\n});\n\n_c = UpdateNewsProfile;\nexport default UpdateNewsProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UpdateNewsProfile\");","map":{"version":3,"sources":["/Users/daniellluis 1/Desktop/noticias_colaborativas/proyecto_final/frontend/src/pages/UpdateNewsPartner.js"],"names":["useContext","useEffect","useState","useParams","getNewsById","updateNewsPartner","Token","ErrorContext","UpdateNewsProfile","id","token","file","setFile","currentPicture","setCurrentPicture","title","setTitle","lead","setLead","text","setText","category","setCategory","setError","loadSingleNews","res","data","json","ok","process","env","REACT_APP_STATIC","picture","news_title","news_lead","news_text","news_category","Error","error","message","handleSubmit","e","preventDefault","requestBody","FormData","append","console","log","window","location","target","files","URL","createObjectURL","value"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,EAAsBC,iBAAtB,QAA+C,YAA/C;AACA,SAASC,KAAT,QAAsB,qBAAtB;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAO,yBAAP;;;;AAEA,MAAMC,iBAAiB,GAAG,MAAM;AAAA;;AAC9B,QAAM;AAAEC,IAAAA;AAAF,MAASN,SAAS,EAAxB;AACA,QAAM,CAACO,KAAD,IAAUV,UAAU,CAACM,KAAD,CAA1B;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACW,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACiB,IAAD,EAAOC,OAAP,IAAkBlB,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACmB,QAAD,EAAWC,WAAX,IAA0BpB,QAAQ,CAAC,qBAAD,CAAxC;AACA,QAAM,GAAGqB,QAAH,IAAevB,UAAU,CAACO,YAAD,CAA/B;AAEAN,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMuB,cAAc,GAAG,YAAY;AACjC,UAAI;AACF,cAAMC,GAAG,GAAG,MAAMrB,WAAW,CAACK,EAAD,CAA7B;AACA,cAAMiB,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;;AAEA,YAAIF,GAAG,CAACG,EAAR,EAAY;AACVd,UAAAA,iBAAiB,CACd,GAAEe,OAAO,CAACC,GAAR,CAAYC,gBAAiB,gBAAeL,IAAI,CAACM,OAAQ,EAD7C,CAAjB;AAGAhB,UAAAA,QAAQ,CAACU,IAAI,CAACO,UAAN,CAAR;AACAf,UAAAA,OAAO,CAACQ,IAAI,CAACQ,SAAN,CAAP;AACAd,UAAAA,OAAO,CAACM,IAAI,CAACS,SAAN,CAAP;AACAb,UAAAA,WAAW,CAACI,IAAI,CAACU,aAAN,CAAX;AACD,SARD,MAQO;AACL,gBAAM,IAAIC,KAAJ,CAAUX,IAAI,CAACY,KAAf,CAAN;AACD;AACF,OAfD,CAeE,OAAOA,KAAP,EAAc;AACdf,QAAAA,QAAQ,CAACe,KAAK,CAACC,OAAP,CAAR;AACD;AACF,KAnBD;;AAoBAf,IAAAA,cAAc;AACf,GAtBQ,EAsBN,CAACf,EAAD,EAAKc,QAAL,CAtBM,CAAT;;AAwBA,QAAMiB,YAAY,GAAG,MAAOC,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,WAAW,GAAG,IAAIC,QAAJ,EAAlB;AACAD,IAAAA,WAAW,CAACE,MAAZ,CAAmB,OAAnB,EAA4B9B,KAA5B;AACA4B,IAAAA,WAAW,CAACE,MAAZ,CAAmB,MAAnB,EAA2B5B,IAA3B;AACA0B,IAAAA,WAAW,CAACE,MAAZ,CAAmB,MAAnB,EAA2B1B,IAA3B;AACAwB,IAAAA,WAAW,CAACE,MAAZ,CAAmB,UAAnB,EAA+BxB,QAA/B;;AAEA,QAAIV,IAAJ,EAAU;AACRgC,MAAAA,WAAW,CAACE,MAAZ,CAAmB,OAAnB,EAA4BlC,IAA5B;AACD;;AAEDmC,IAAAA,OAAO,CAACC,GAAR,CAAYlC,cAAZ;;AAEA,QAAI;AACF,YAAMY,GAAG,GAAG,MAAMpB,iBAAiB,CAACsC,WAAD,EAAcjC,KAAd,EAAqBD,EAArB,CAAnC;AACAqC,MAAAA,OAAO,CAACC,GAAR,CAAYJ,WAAZ;AACA,YAAMjB,IAAI,GAAG,MAAMD,GAAG,CAACE,IAAJ,EAAnB;;AACA,UAAIF,GAAG,CAACG,EAAR,EAAY;AACVoB,QAAAA,MAAM,CAACC,QAAP,GAAmB,8BAA6BxC,EAAG,EAAnD;AACD,OAFD,MAEO;AACL,cAAM,IAAI4B,KAAJ,CAAUX,IAAI,CAACY,KAAf,CAAN;AACD;AACF,KATD,CASE,OAAOA,KAAP,EAAc;AACdf,MAAAA,QAAQ,CAACe,KAAK,CAACC,OAAP,CAAR;AACD;AACF,GA1BD;;AA4BA,sBACE;AAAA,2BACE;AAAM,MAAA,SAAS,EAAC,4BAAhB;AAAA,6BACE;AAAM,QAAA,SAAS,EAAC,gBAAhB;AAAiC,QAAA,QAAQ,EAAEC,YAA3C;AAAA,gCACE;AAAI,UAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,gBAFF,eAGE;AAAA,kCACE;AAAO,YAAA,SAAS,EAAC,aAAjB;AAA+B,YAAA,OAAO,EAAC;AAAvC;AAAA;AAAA;AAAA;AAAA,kBADF,EAEG3B,cAAc,gBACb;AACE,YAAA,SAAS,EAAC,kBADZ;AAEE,YAAA,GAAG,EAAEA,cAFP;AAGE,YAAA,GAAG,EAAEE;AAHP;AAAA;AAAA;AAAA;AAAA,kBADa,GAMX,IARN,eASE;AACE,YAAA,SAAS,EAAC,qBADZ;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,QAAQ,EAAG0B,CAAD,IAAO;AACf7B,cAAAA,OAAO,CAAC6B,CAAC,CAACS,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAP;AACArC,cAAAA,iBAAiB,CAACsC,GAAG,CAACC,eAAJ,CAAoBZ,CAAC,CAACS,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB,CAAD,CAAjB;AACD,aANH;AAOE,YAAA,MAAM,EAAC,SAPT;AAQE,YAAA,IAAI,EAAC;AARP;AAAA;AAAA;AAAA;AAAA,kBATF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,eAuBE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,OAAO,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AACE,YAAA,SAAS,EAAC,oBADZ;AAEE,YAAA,IAAI,EAAC,OAFP;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,KAAK,EAAEpC,KAJT;AAKE,YAAA,QAAQ,EAAG0B,CAAD,IAAOzB,QAAQ,CAACyB,CAAC,CAACS,MAAF,CAASI,KAAV;AAL3B;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAvBF,eAkCE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,OAAO,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AACE,YAAA,SAAS,EAAC,oBADZ;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,KAAK,EAAErC,IAJT;AAKE,YAAA,QAAQ,EAAGwB,CAAD,IAAOvB,OAAO,CAACuB,CAAC,CAACS,MAAF,CAASI,KAAV;AAL1B;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAlCF,eA6CE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,OAAO,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AACE,YAAA,SAAS,EAAC,oBADZ;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,GAAG,EAAC,GAJN;AAKE,YAAA,KAAK,EAAEnC,IALT;AAME,YAAA,QAAQ,EAAGsB,CAAD,IAAOrB,OAAO,CAACqB,CAAC,CAACS,MAAF,CAASI,KAAV;AAN1B;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7CF,eAyDE;AAAK,UAAA,SAAS,EAAC,uBAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAO,YAAA,OAAO,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AACE,YAAA,SAAS,EAAC,0BADZ;AAEE,YAAA,IAAI,EAAC,UAFP;AAGE,YAAA,IAAI,EAAC,MAHP;AAIE,YAAA,KAAK,EAAEjC,QAJT;AAKE,YAAA,QAAQ,EAAGoB,CAAD,IAAO;AACfnB,cAAAA,WAAW,CAACmB,CAAC,CAACS,MAAF,CAASI,KAAV,CAAX;AACD,aAPH;AAAA,oCASE;AAAQ,cAAA,KAAK,EAAC,wBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBATF,eAUE;AAAQ,cAAA,KAAK,EAAC,sBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF,eAWE;AAAQ,cAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAXF,eAYE;AAAQ,cAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZF,eAaE;AAAQ,cAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbF,eAcE;AAAQ,cAAA,KAAK,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAdF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAzDF,eA6EE;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,iCACE;AACE,YAAA,SAAS,EAAC,QADZ;AAEE,YAAA,IAAI,EAAC,QAFP;AAGE,YAAA,KAAK,EAAC;AAHR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBA7EF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AA2FD,CA1JD;;GAAM9C,iB;UACWL,S;;;KADXK,iB;AA4JN,eAAeA,iBAAf","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { getNewsById, updateNewsPartner } from \"../api/api\";\nimport { Token } from \"../components/token\";\nimport { ErrorContext } from \"../components/error\";\nimport \"./updateNewsPartner.css\";\n\nconst UpdateNewsProfile = () => {\n  const { id } = useParams();\n  const [token] = useContext(Token);\n  const [file, setFile] = useState(\"\");\n  const [currentPicture, setCurrentPicture] = useState(\"\");\n  const [title, setTitle] = useState(\"\");\n  const [lead, setLead] = useState(\"\");\n  const [text, setText] = useState(\"\");\n  const [category, setCategory] = useState(\"Elige una categorÃ­a\");\n  const [, setError] = useContext(ErrorContext);\n\n  useEffect(() => {\n    const loadSingleNews = async () => {\n      try {\n        const res = await getNewsById(id);\n        const data = await res.json();\n\n        if (res.ok) {\n          setCurrentPicture(\n            `${process.env.REACT_APP_STATIC}/images/news/${data.picture}`\n          );\n          setTitle(data.news_title);\n          setLead(data.news_lead);\n          setText(data.news_text);\n          setCategory(data.news_category);\n        } else {\n          throw new Error(data.error);\n        }\n      } catch (error) {\n        setError(error.message);\n      }\n    };\n    loadSingleNews();\n  }, [id, setError]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    let requestBody = new FormData();\n    requestBody.append(\"title\", title);\n    requestBody.append(\"lead\", lead);\n    requestBody.append(\"text\", text);\n    requestBody.append(\"category\", category);\n\n    if (file) {\n      requestBody.append(\"image\", file);\n    }\n\n    console.log(currentPicture);\n\n    try {\n      const res = await updateNewsPartner(requestBody, token, id);\n      console.log(requestBody);\n      const data = await res.json();\n      if (res.ok) {\n        window.location = `http://localhost:3050/news/${id}`;\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  };\n\n  return (\n    <>\n      <main className=\"main-container-Update-News\">\n        <form className=\"form-edit-news\" onSubmit={handleSubmit}>\n          <h2 className=\"title-news-partner\">Editar noticia</h2>\n          <div className=\"separator\"></div>\n          <div>\n            <label className=\"label-image\" htmlFor=\"image\" />\n            {currentPicture ? (\n              <img\n                className=\"img-news-partner\"\n                src={currentPicture}\n                alt={title}\n              />\n            ) : null}\n            <input\n              className=\"input-partner-image\"\n              type=\"file\"\n              onChange={(e) => {\n                setFile(e.target.files[0]);\n                setCurrentPicture(URL.createObjectURL(e.target.files[0]));\n              }}\n              accept=\"image/*\"\n              name=\"image\"\n            ></input>\n          </div>\n          <div className=\"div-edit-partner-news\">\n            <i className=\"fas fa-pencil-alt\"></i>\n            <label htmlFor=\"title\"></label>\n            <input\n              className=\"input-edit-partner\"\n              name=\"title\"\n              type=\"text\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n            />\n          </div>\n          <div className=\"div-edit-partner-news\">\n            <i className=\"fas fa-pencil-alt\"></i>\n            <label htmlFor=\"lead\"></label>\n            <input\n              className=\"input-edit-partner\"\n              name=\"lead\"\n              type=\"text\"\n              value={lead}\n              onChange={(e) => setLead(e.target.value)}\n            />\n          </div>\n          <div className=\"div-edit-partner-news\">\n            <i className=\"fas fa-pencil-alt\"></i>\n            <label htmlFor=\"text\"></label>\n            <textarea\n              className=\"input-edit-partner\"\n              name=\"text\"\n              type=\"text\"\n              row=\"8\"\n              value={text}\n              onChange={(e) => setText(e.target.value)}\n            />\n          </div>\n          <div className=\"div-edit-partner-news\">\n            <i className=\"fas fa-pencil-alt\"></i>\n            <label htmlFor=\"category\"></label>\n            <select\n              className=\"select-edit-partner-news\"\n              name=\"category\"\n              type=\"text\"\n              value={category}\n              onChange={(e) => {\n                setCategory(e.target.value);\n              }}\n            >\n              <option value=\"Elige una categorÃ­a\">Elige una CategorÃ­a</option>\n              <option value=\"ciencia y tecnologia\">ciencia y tecnologia</option>\n              <option value=\"cultura\">cultura</option>\n              <option value=\"deportes\">deportes</option>\n              <option value=\"economia\">economia</option>\n              <option value=\"politica\">politica</option>\n            </select>\n          </div>\n          <div className=\"div-post-submit\">\n            <input\n              className=\"submit\"\n              type=\"submit\"\n              value=\"Guardar Cambios\"\n            ></input>\n          </div>\n        </form>\n      </main>\n    </>\n  );\n};\n\nexport default UpdateNewsProfile;\n"]},"metadata":{},"sourceType":"module"}