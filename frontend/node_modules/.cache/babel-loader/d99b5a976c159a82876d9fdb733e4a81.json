{"ast":null,"code":"var _jsxFileName = \"/Users/daniellluis 1/Desktop/noticias_colaborativas/proyecto_final/frontend/src/components/News.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\"; // import { getTopNews } from \"../api/api\";\n\nimport { Token } from \"../components/token\";\nimport { ErrorContext } from \"./error\";\nimport Fire from \"./Fire\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction News({\n  noticias,\n  setTopNews\n}) {\n  _s();\n\n  const [token] = useContext(Token);\n  const [, setError] = useContext(ErrorContext);\n  const [counter, setCounter] = useState(noticias.counter_news);\n  useEffect(() => {\n    setCounter(noticias.counter_news);\n  }, [noticias.counter_news]);\n\n  async function upVoteHandler() {\n    const vote = {\n      mas: true,\n      menos: false\n    };\n\n    try {\n      const res = await fetch(`http://localhost:3000/api/v1/news/${noticias.id}/vote`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(vote)\n      });\n      const data = await res.json();\n      console.log(data);\n\n      if (res.ok) {\n        setCounter(noticias.counter_news + 1);\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  }\n\n  async function downVoteHandler() {\n    const vote = {\n      mas: false,\n      menos: true\n    };\n\n    try {\n      const res = await fetch(`http://localhost:3000/api/v1/news/${noticias.id}/vote`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-type\": \"application/json\",\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(vote)\n      });\n      const data = await res.json();\n\n      if (data.ok) {\n        setCounter(noticias.counter_news - 1);\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  }\n\n  const fechaCreacion = noticias.created_at;\n  const fechaFormateada = new Date(fechaCreacion).toLocaleString();\n  const avatarImage = noticias.user_avatar ? `${process.env.REACT_APP_STATIC}/images/profiles/${noticias.user_avatar}` : \"/avatar/defaul-profile-image.png\"; // const newsPicture = noticias.picture.includes(\"http\")\n  //   ? noticias.picture\n  //   : `${process.env.REACT_APP_STATIC}/images/news/${noticias.picture}`;\n  // console.log(\n  //   fecha.getDay(),\n  //   fecha.getMonth() + 1,\n  //   fecha.getFullYear(),\n  //   fecha.getHours(),\n  //   fecha.getMinutes(),\n  //   fecha.getSeconds()\n  // );\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"news\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `/news/${noticias.id}`,\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: noticias.news_title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: noticias.news_lead\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n        children: [\"Publicado por\", /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar-noticia\",\n          src: avatarImage,\n          alt: \"avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), noticias.user_name, \" el \", fechaFormateada]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"noticias-flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fuego\",\n        children: [/*#__PURE__*/_jsxDEV(Fire, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons-vote\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button-vote\",\n            onClick: upVoteHandler,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mas\",\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"counter-vote\",\n            children: counter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"button-vote\",\n            onClick: downVoteHandler,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mas\",\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"imagenes\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"imagen\",\n          src: noticias.picture,\n          alt: \"imagen-noticia\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: noticias.news_text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(News, \"y28VdQGDDQo0TYDJ2VSVwkbnZZM=\");\n\n_c = News;\nexport default News;\n\nvar _c;\n\n$RefreshReg$(_c, \"News\");","map":{"version":3,"sources":["/Users/daniellluis 1/Desktop/noticias_colaborativas/proyecto_final/frontend/src/components/News.js"],"names":["useContext","useEffect","useState","Link","Token","ErrorContext","Fire","News","noticias","setTopNews","token","setError","counter","setCounter","counter_news","upVoteHandler","vote","mas","menos","res","fetch","id","method","headers","Authorization","body","JSON","stringify","data","json","console","log","ok","Error","error","message","downVoteHandler","fechaCreacion","created_at","fechaFormateada","Date","toLocaleString","avatarImage","user_avatar","process","env","REACT_APP_STATIC","news_title","news_lead","user_name","picture","news_text"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,IAAT,QAAqB,kBAArB,C,CACA;;AACA,SAASC,KAAT,QAAsB,qBAAtB;AACA,SAASC,YAAT,QAA6B,SAA7B;AACA,OAAOC,IAAP,MAAiB,QAAjB;;;AAEA,SAASC,IAAT,CAAc;AAAEC,EAAAA,QAAF;AAAYC,EAAAA;AAAZ,CAAd,EAAwC;AAAA;;AACtC,QAAM,CAACC,KAAD,IAAUV,UAAU,CAACI,KAAD,CAA1B;AACA,QAAM,GAAGO,QAAH,IAAeX,UAAU,CAACK,YAAD,CAA/B;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAACM,QAAQ,CAACM,YAAV,CAAtC;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,UAAU,CAACL,QAAQ,CAACM,YAAV,CAAV;AACD,GAFQ,EAEN,CAACN,QAAQ,CAACM,YAAV,CAFM,CAAT;;AAIA,iBAAeC,aAAf,GAA+B;AAC7B,UAAMC,IAAI,GAAG;AACXC,MAAAA,GAAG,EAAE,IADM;AAEXC,MAAAA,KAAK,EAAE;AAFI,KAAb;;AAIA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMC,KAAK,CACpB,qCAAoCZ,QAAQ,CAACa,EAAG,OAD5B,EAErB;AACEC,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,UAASd,KAAM;AAFxB,SAFX;AAMEe,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,IAAf;AANR,OAFqB,CAAvB;AAWA,YAAMY,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AAEA,UAAIT,GAAG,CAACa,EAAR,EAAY;AACVnB,QAAAA,UAAU,CAACL,QAAQ,CAACM,YAAT,GAAwB,CAAzB,CAAV;AACD,OAFD,MAEO;AACL,cAAM,IAAImB,KAAJ,CAAUL,IAAI,CAACM,KAAf,CAAN;AACD;AACF,KApBD,CAoBE,OAAOA,KAAP,EAAc;AACdvB,MAAAA,QAAQ,CAACuB,KAAK,CAACC,OAAP,CAAR;AACD;AACF;;AAED,iBAAeC,eAAf,GAAiC;AAC/B,UAAMpB,IAAI,GAAG;AACXC,MAAAA,GAAG,EAAE,KADM;AAEXC,MAAAA,KAAK,EAAE;AAFI,KAAb;;AAIA,QAAI;AACF,YAAMC,GAAG,GAAG,MAAMC,KAAK,CACpB,qCAAoCZ,QAAQ,CAACa,EAAG,OAD5B,EAErB;AACEC,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,UAASd,KAAM;AAFxB,SAFX;AAMEe,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,IAAf;AANR,OAFqB,CAAvB;AAWA,YAAMY,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAJ,EAAnB;;AACA,UAAID,IAAI,CAACI,EAAT,EAAa;AACXnB,QAAAA,UAAU,CAACL,QAAQ,CAACM,YAAT,GAAwB,CAAzB,CAAV;AACD,OAFD,MAEO;AACL,cAAM,IAAImB,KAAJ,CAAUL,IAAI,CAACM,KAAf,CAAN;AACD;AACF,KAlBD,CAkBE,OAAOA,KAAP,EAAc;AACdvB,MAAAA,QAAQ,CAACuB,KAAK,CAACC,OAAP,CAAR;AACD;AACF;;AAED,QAAME,aAAa,GAAG7B,QAAQ,CAAC8B,UAA/B;AACA,QAAMC,eAAe,GAAG,IAAIC,IAAJ,CAASH,aAAT,EAAwBI,cAAxB,EAAxB;AAEA,QAAMC,WAAW,GAAGlC,QAAQ,CAACmC,WAAT,GACf,GAAEC,OAAO,CAACC,GAAR,CAAYC,gBAAiB,oBAAmBtC,QAAQ,CAACmC,WAAY,EADxD,GAEhB,kCAFJ,CAtEsC,CA0EtC;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBACE;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA,4BACE,QAAC,IAAD;AAAM,MAAA,EAAE,EAAG,SAAQnC,QAAQ,CAACa,EAAG,EAA/B;AAAA,6BACE;AAAA,kBAAKb,QAAQ,CAACuC;AAAd;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE;AAAA,gBAAKvC,QAAQ,CAACwC;AAAd;AAAA;AAAA;AAAA;AAAA,YAJF,eAKE;AAAA,6BACE;AAAA,iDAEE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAgC,UAAA,GAAG,EAAEN,WAArC;AAAkD,UAAA,GAAG,EAAC;AAAtD;AAAA;AAAA;AAAA;AAAA,gBAFF,EAGGlC,QAAQ,CAACyC,SAHZ,UAG2BV,eAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YALF,eAYE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA,gCACE,QAAC,IAAD;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AAAQ,YAAA,SAAS,EAAC,aAAlB;AAAgC,YAAA,OAAO,EAAExB,aAAzC;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAK,YAAA,SAAS,EAAC,cAAf;AAAA,sBAA+BH;AAA/B;AAAA;AAAA;AAAA;AAAA,kBAJF,eAKE;AAAQ,YAAA,SAAS,EAAC,aAAlB;AAAgC,YAAA,OAAO,EAAEwB,eAAzC;AAAA,mCACE;AAAM,cAAA,SAAS,EAAC,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAaE;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA,+BACE;AACE,UAAA,SAAS,EAAC,QADZ;AAEE,UAAA,GAAG,EAAE5B,QAAQ,CAAC0C,OAFhB;AAGE,UAAA,GAAG,EAAC;AAHN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAbF;AAAA;AAAA;AAAA;AAAA;AAAA,YAZF,eAiCE;AAAA,gBAAI1C,QAAQ,CAAC2C;AAAb;AAAA;AAAA;AAAA;AAAA,YAjCF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqCD;;GA5HQ5C,I;;KAAAA,I;AA8HT,eAAeA,IAAf","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\n// import { getTopNews } from \"../api/api\";\nimport { Token } from \"../components/token\";\nimport { ErrorContext } from \"./error\";\nimport Fire from \"./Fire\";\n\nfunction News({ noticias, setTopNews }) {\n  const [token] = useContext(Token);\n  const [, setError] = useContext(ErrorContext);\n  const [counter, setCounter] = useState(noticias.counter_news);\n\n  useEffect(() => {\n    setCounter(noticias.counter_news);\n  }, [noticias.counter_news]);\n\n  async function upVoteHandler() {\n    const vote = {\n      mas: true,\n      menos: false,\n    };\n    try {\n      const res = await fetch(\n        `http://localhost:3000/api/v1/news/${noticias.id}/vote`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(vote),\n        }\n      );\n      const data = await res.json();\n      console.log(data);\n\n      if (res.ok) {\n        setCounter(noticias.counter_news + 1);\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  }\n\n  async function downVoteHandler() {\n    const vote = {\n      mas: false,\n      menos: true,\n    };\n    try {\n      const res = await fetch(\n        `http://localhost:3000/api/v1/news/${noticias.id}/vote`,\n        {\n          method: \"PUT\",\n          headers: {\n            \"Content-type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify(vote),\n        }\n      );\n      const data = await res.json();\n      if (data.ok) {\n        setCounter(noticias.counter_news - 1);\n      } else {\n        throw new Error(data.error);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n  }\n\n  const fechaCreacion = noticias.created_at;\n  const fechaFormateada = new Date(fechaCreacion).toLocaleString();\n\n  const avatarImage = noticias.user_avatar\n    ? `${process.env.REACT_APP_STATIC}/images/profiles/${noticias.user_avatar}`\n    : \"/avatar/defaul-profile-image.png\";\n\n  // const newsPicture = noticias.picture.includes(\"http\")\n  //   ? noticias.picture\n  //   : `${process.env.REACT_APP_STATIC}/images/news/${noticias.picture}`;\n\n  // console.log(\n  //   fecha.getDay(),\n  //   fecha.getMonth() + 1,\n  //   fecha.getFullYear(),\n  //   fecha.getHours(),\n  //   fecha.getMinutes(),\n  //   fecha.getSeconds()\n  // );\n\n  return (\n    <div className=\"news\">\n      <Link to={`/news/${noticias.id}`}>\n        <h1>{noticias.news_title}</h1>\n      </Link>\n      <h2>{noticias.news_lead}</h2>\n      <div>\n        <h5>\n          Publicado por\n          <img className=\"avatar-noticia\" src={avatarImage} alt=\"avatar\" />\n          {noticias.user_name} el {fechaFormateada}\n        </h5>\n      </div>\n      <div className=\"noticias-flex\">\n        <div className=\"fuego\">\n          <Fire></Fire>\n          <div className=\"buttons-vote\">\n            <button className=\"button-vote\" onClick={upVoteHandler}>\n              <span className=\"mas\">+</span>\n            </button>\n            <div className=\"counter-vote\">{counter}</div>\n            <button className=\"button-vote\" onClick={downVoteHandler}>\n              <span className=\"mas\">-</span>\n            </button>\n          </div>\n        </div>\n        <div className=\"imagenes\">\n          <img\n            className=\"imagen\"\n            src={noticias.picture}\n            alt=\"imagen-noticia\"\n          ></img>\n        </div>\n      </div>\n      <p>{noticias.news_text}</p>\n    </div>\n  );\n}\n\nexport default News;\n"]},"metadata":{},"sourceType":"module"}